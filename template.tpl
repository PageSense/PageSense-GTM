___INFO___

{
  "displayName": "PageSense Tag",
  "description": "This tag will inject PageSense's tracking code snippet on the website pages that have the Google Tag Manager snippet installed.",
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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",
    "displayName": "",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "help": "You can get the space name in the Project Info section under the Settings tab of your PageSense app.",
    "displayName": "Space Name",
    "simpleValueType": true,
    "name": "portalName",
    "type": "TEXT"
  },
  {
    "help": "You can get the project key in the Project Info section under the Settings tab of your PageSense app.",
    "displayName": "Project Key",
    "simpleValueType": true,
    "name": "projectKey",
    "type": "TEXT"
  },
  {
    "help": "You can get the data center in the Project Info section under the Settings tab of your PageSense app.",
    "macrosInSelect": false,
    "selectItems": [
      {
        "displayValue": "US",
        "value": "cdn.pagesense.io"
      },
      {
        "displayValue": "EU",
        "value": "cdn-eu.pagesense.io"
      },
      {
        "displayValue": "IN",
        "value": "cdn-in.pagesense.io"
      },
      {
        "displayValue": "CN",
        "value": "cdn.pagesense.cn"
      }
    ],
    "displayName": "Data Center",
    "simpleValueType": true,
    "name": "dataCenter",
    "type": "SELECT"
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.pagesense.io/"
              },
              {
                "type": 1,
                "string": "https://*.pagesense.cn/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');

const portalName = data.portalName;
const projectKey = data.projectKey;
const dataCenter = data.dataCenter;

const url = 
'https://' + dataCenter + '/js/' + portalName + '/' + projectKey + '.js'; 

const onSuccess = () => {
  data.gtmOnSuccess();
};

const onFailure = () => {
  data.gtmOnFailure();
};

if (queryPermission('inject_script', url)) {
  injectScript(url, onSuccess, onFailure);

} else {
  data.gtmOnFailure();
}


___NOTES___

Created on 19/08/2019, 11:44:43
